---
phase: 01-foundation
plan: 04
type: execute
wave: 2
depends_on: ["01-01", "01-02"]
files_modified:
  - apps/web/package.json
  - apps/web/tsconfig.json
  - apps/web/vite.config.ts
  - apps/web/index.html
  - apps/web/src/main.tsx
  - apps/web/src/App.tsx
  - apps/web/src/index.css
  - apps/web/src/vite-env.d.ts
autonomous: false

must_haves:
  truths:
    - "pnpm --filter @compliance-iq/web dev starts Vite server"
    - "React app renders in browser at localhost:5173"
    - "Tailwind CSS styles are applied"
    - "Convex provider connects to backend"
  artifacts:
    - path: "apps/web/vite.config.ts"
      provides: "Vite configuration with React and Tailwind"
      contains: "tailwindcss"
    - path: "apps/web/src/main.tsx"
      provides: "React entry with Convex provider"
      contains: "ConvexProvider"
    - path: "apps/web/src/App.tsx"
      provides: "Main application component"
      contains: "useQuery"
  key_links:
    - from: "apps/web/src/main.tsx"
      to: "Convex backend"
      via: "ConvexReactClient"
      pattern: "VITE_CONVEX_URL"
    - from: "apps/web/src/App.tsx"
      to: "apps/convex/convex/jurisdictions.ts"
      via: "useQuery hook"
      pattern: "api\\.jurisdictions\\.list"
---

<objective>
Create React frontend with Vite, Tailwind CSS, and Convex provider integration.

Purpose: Build the user-facing application for compliance research queries.
Output: Working React app connected to Convex backend, styled with Tailwind.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-01-SUMMARY.md
@.planning/phases/01-foundation/01-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Vite + React + Tailwind frontend scaffold</name>
  <files>
    apps/web/package.json
    apps/web/tsconfig.json
    apps/web/vite.config.ts
    apps/web/index.html
    apps/web/src/main.tsx
    apps/web/src/App.tsx
    apps/web/src/index.css
    apps/web/src/vite-env.d.ts
  </files>
  <action>
1. Create `apps/web/` directory structure:
   ```
   apps/web/
   ├── src/
   │   ├── main.tsx
   │   ├── App.tsx
   │   ├── index.css
   │   └── vite-env.d.ts
   ├── public/
   ├── package.json
   ├── tsconfig.json
   ├── vite.config.ts
   └── index.html
   ```

2. Create `apps/web/package.json`:
   ```json
   {
     "name": "@compliance-iq/web",
     "version": "0.1.0",
     "private": true,
     "type": "module",
     "scripts": {
       "dev": "vite",
       "build": "tsc && vite build",
       "preview": "vite preview"
     },
     "dependencies": {
       "react": "^18.3.1",
       "react-dom": "^18.3.1",
       "convex": "^1.17.0",
       "@compliance-iq/shared-types": "workspace:*"
     },
     "devDependencies": {
       "@types/react": "^18.3.18",
       "@types/react-dom": "^18.3.5",
       "@vitejs/plugin-react": "^4.3.4",
       "@tailwindcss/vite": "^4.0.0",
       "tailwindcss": "^4.0.0",
       "typescript": "^5.0.3",
       "vite": "^6.0.0"
     }
   }
   ```

3. Create `apps/web/vite.config.ts`:
   ```typescript
   import { defineConfig } from 'vite';
   import react from '@vitejs/plugin-react';
   import tailwindcss from '@tailwindcss/vite';

   export default defineConfig({
     plugins: [react(), tailwindcss()],
     server: {
       port: 5173,
     },
   });
   ```

4. Create `apps/web/tsconfig.json`:
   ```json
   {
     "extends": "@compliance-iq/tsconfig/react.json",
     "compilerOptions": {
       "baseUrl": ".",
       "paths": {
         "@/*": ["./src/*"]
       }
     },
     "include": ["src/**/*.ts", "src/**/*.tsx"],
     "references": [{ "path": "../convex" }]
   }
   ```

5. Create `apps/web/index.html`:
   ```html
   <!DOCTYPE html>
   <html lang="en">
     <head>
       <meta charset="UTF-8" />
       <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
       <meta name="viewport" content="width=device-width, initial-scale=1.0" />
       <title>ComplianceIQ</title>
     </head>
     <body>
       <div id="root"></div>
       <script type="module" src="/src/main.tsx"></script>
     </body>
   </html>
   ```

6. Create `apps/web/src/index.css`:
   ```css
   @import "tailwindcss";
   ```

7. Create `apps/web/src/vite-env.d.ts`:
   ```typescript
   /// <reference types="vite/client" />

   interface ImportMetaEnv {
     readonly VITE_CONVEX_URL: string;
   }

   interface ImportMeta {
     readonly env: ImportMetaEnv;
   }
   ```

8. Run `pnpm install` from root to install all web dependencies
  </action>
  <verify>
    - `ls apps/web/src/` shows main.tsx, App.tsx, index.css
    - `cat apps/web/vite.config.ts | grep "tailwindcss"` shows Tailwind plugin
    - `pnpm install` completes without errors
  </verify>
  <done>React frontend scaffold created with Vite and Tailwind 4.x configuration</done>
</task>

<task type="auto">
  <name>Task 2: Wire Convex provider and verify connection</name>
  <files>
    apps/web/src/main.tsx
    apps/web/src/App.tsx
    apps/web/.env.local
  </files>
  <action>
1. Create `apps/web/src/main.tsx`:
   ```typescript
   import { StrictMode } from 'react';
   import { createRoot } from 'react-dom/client';
   import { ConvexProvider, ConvexReactClient } from 'convex/react';
   import App from './App';
   import './index.css';

   const convexUrl = import.meta.env.VITE_CONVEX_URL;

   if (!convexUrl) {
     throw new Error('Missing VITE_CONVEX_URL environment variable');
   }

   const convex = new ConvexReactClient(convexUrl);

   createRoot(document.getElementById('root')!).render(
     <StrictMode>
       <ConvexProvider client={convex}>
         <App />
       </ConvexProvider>
     </StrictMode>
   );
   ```

2. Create `apps/web/src/App.tsx`:
   ```typescript
   import { useQuery } from 'convex/react';
   import { api } from '../../convex/convex/_generated/api';

   function App() {
     const jurisdictions = useQuery(api.jurisdictions.list, {});

     return (
       <div className="min-h-screen bg-slate-50">
         <header className="bg-white shadow">
           <div className="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8">
             <h1 className="text-3xl font-bold tracking-tight text-slate-900">
               ComplianceIQ
             </h1>
             <p className="mt-1 text-sm text-slate-600">
               Regulatory compliance research for Texas
             </p>
           </div>
         </header>

         <main className="mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8">
           <div className="rounded-lg bg-white p-6 shadow">
             <h2 className="text-lg font-semibold text-slate-900 mb-4">
               Jurisdictions
             </h2>

             {jurisdictions === undefined ? (
               <p className="text-slate-500">Loading...</p>
             ) : jurisdictions.length === 0 ? (
               <p className="text-slate-500">
                 No jurisdictions yet. Add one via the Convex dashboard.
               </p>
             ) : (
               <ul className="divide-y divide-slate-200">
                 {jurisdictions.map((j) => (
                   <li key={j._id} className="py-3 flex items-center justify-between">
                     <div>
                       <p className="font-medium text-slate-900">{j.name}</p>
                       <p className="text-sm text-slate-500">{j.type}</p>
                     </div>
                     <span
                       className={`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${
                         j.isActive
                           ? 'bg-green-100 text-green-800'
                           : 'bg-slate-100 text-slate-800'
                       }`}
                     >
                       {j.isActive ? 'Active' : 'Inactive'}
                     </span>
                   </li>
                 ))}
               </ul>
             )}
           </div>

           <div className="mt-8 rounded-lg bg-blue-50 border border-blue-200 p-4">
             <h3 className="text-sm font-medium text-blue-800">Connection Status</h3>
             <p className="mt-1 text-sm text-blue-700">
               {jurisdictions !== undefined
                 ? 'Connected to Convex backend'
                 : 'Connecting...'}
             </p>
           </div>
         </main>
       </div>
     );
   }

   export default App;
   ```

3. Create `apps/web/.env.local` (template - user must fill in):
   ```
   # Get this URL from the Convex dashboard or `npx convex dev` output
   VITE_CONVEX_URL=https://your-project.convex.cloud
   ```

4. Ensure apps/convex `npx convex dev` is running (provides the CONVEX_URL)

5. Get the Convex deployment URL from `npx convex dev` output and update .env.local

6. Run `pnpm --filter @compliance-iq/web dev` to start the frontend
  </action>
  <verify>
    - `curl http://localhost:5173` returns HTML with "ComplianceIQ"
    - Browser at http://localhost:5173 shows styled page with Tailwind
    - Connection status shows "Connected to Convex backend"
    - If a jurisdiction was added in Plan 02, it appears in the list
  </verify>
  <done>React frontend connected to Convex backend with Tailwind styling</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>React frontend with Vite, Tailwind CSS, and Convex integration</what-built>
  <how-to-verify>
1. Ensure Convex dev server is running: `cd apps/convex && npx convex dev`
2. Copy the Convex URL from the output to `apps/web/.env.local`
3. Start web dev server: `pnpm --filter @compliance-iq/web dev`
4. Open http://localhost:5173 in browser
5. Verify:
   - Page shows "ComplianceIQ" header with Tailwind styling (slate background, white cards)
   - "Connection Status" shows "Connected to Convex backend"
   - If you added a test jurisdiction in Plan 02, it appears in the list
6. Test Tailwind: Inspect element and verify CSS classes are applied (not just class names)
  </how-to-verify>
  <resume-signal>Type "approved" if React app loads with Tailwind styles and Convex connection, or describe issues</resume-signal>
</task>

</tasks>

<verification>
1. `pnpm --filter @compliance-iq/web dev` starts Vite on port 5173
2. React app renders with Tailwind CSS styling
3. Convex provider connects to backend (no console errors)
4. Jurisdictions query returns data (or empty array)
5. Real-time updates work (add jurisdiction in dashboard, appears in app)
</verification>

<success_criteria>
- React frontend created with Vite 6.x and Tailwind 4.x
- Convex provider wraps application and connects to backend
- useQuery hook fetches jurisdictions from Convex
- Tailwind styling renders correctly (utility classes applied)
- Environment variable pattern established for VITE_CONVEX_URL
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-04-SUMMARY.md`
</output>
